# =============================================================================
# Mnemos Second Brain — Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
# NEVER commit .env to version control.
# =============================================================================

# Caddy site address — use ":80" for HTTP-only (dev/local), or "brain.yourdomain.com" for auto-HTTPS
SITE_ADDRESS=:80
DOMAIN=brain.yourdomain.com

# Auth
AUTH_SALT=<generate-random-32-bytes-hex>  # python3 -c "import os; print(os.urandom(32).hex())"
JWT_SECRET=<generate-random-32-bytes-hex>  # python3 -c "import os; print(os.urandom(32).hex())"
# Session timeout — master key wiped from memory after this many minutes of inactivity
# Must be > 0; set to a large value (e.g. 9999) to effectively disable
SESSION_TIMEOUT_MINUTES=15

# Services (internal Docker network — do not change unless you modify docker-compose.yml)
QDRANT_URL=http://qdrant:6333
OLLAMA_URL=http://ollama:11434
LLM_MODEL=llama3.2:8b
EMBEDDING_MODEL=nomic-embed-text

# Optional: Cloud LLM fallback (OpenAI-compatible endpoint)
# Activated when Ollama is unavailable. Leave empty to disable.
# FALLBACK_LLM_URL=https://api.openai.com/v1
# FALLBACK_LLM_API_KEY=sk-...
# FALLBACK_LLM_MODEL=gpt-4o-mini
# FALLBACK_EMBEDDING_MODEL=text-embedding-3-small

# OCR (optical character recognition for scanned PDFs and photos)
# Requires tesseract-ocr installed in the backend Docker image (included by default).
# Set to false to disable if you don't need OCR or want to reduce processing time.
OCR_ENABLED=true

# Geocoding (reverse geocode GPS coordinates from photos to place names)
# Uses Nominatim (OpenStreetMap) — free, no API key needed, rate limited to 1 req/sec.
# Set to false to disable automatic place name resolution.
GEOCODING_ENABLED=true

# Vault integrity check — fraction of files to hash-verify daily (0.0=skip, 1.0=all)
# VAULT_INTEGRITY_SAMPLE_PCT=0.1

# Immich integration (self-hosted photo management)
# Enables syncing face-detected people from Immich into Mnemos.
# Leave IMMICH_URL empty to disable.
# IMMICH_URL=http://immich:2283
# IMMICH_API_KEY=your-immich-api-key
# IMMICH_SYNC_INTERVAL_HOURS=6

# Heartbeat (dead man's switch)
HEARTBEAT_CHECK_INTERVAL_DAYS=30
HEARTBEAT_TRIGGER_DAYS=90
ALERT_EMAIL=your-email@example.com
EMERGENCY_CONTACT_EMAIL=spouse@example.com

# Backup (optional, for automated backups)
RESTIC_REPOSITORY_LOCAL=/backups/restic
RESTIC_REPOSITORY_B2=b2:your-bucket-name
RESTIC_PASSWORD=<generate-strong-password>
B2_ACCOUNT_ID=<your-b2-account-id>
B2_ACCOUNT_KEY=<your-b2-account-key>

# S3 cold storage (for monthly immutable backups)
RESTIC_REPOSITORY_S3=s3:s3.amazonaws.com/secondbrain-cold
AWS_ACCESS_KEY_ID=<your-aws-access-key>
AWS_SECRET_ACCESS_KEY=<your-aws-secret-key>

# Email (for alerts)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-email@example.com
SMTP_PASSWORD=<your-smtp-password>
